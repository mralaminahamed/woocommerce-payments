@import '../style';

#payment .payment_method_woocommerce_payments .testmode-info {
	margin-bottom: 0.5em;
}

#wcpay-upe-element,
.wcpay-upe-element {
	padding: 7px 7px;
	margin-bottom: 0.5em;

	&.processing {
		min-height: 70px;
	}
}

.wcpay-checkout-email-field {
	position: relative;
}

.wcpay-checkout-email-field button.wcpay-stripelink-modal-trigger {
	display: none;
	position: absolute;
	right: 5px;
	width: 64px;
	height: 40px;
	background: no-repeat url( 'assets/images/payment-methods/link.svg?asset' );
	background-color: none;
	cursor: pointer;
	border: none;
}

.woopayments-rich-payment-method-label {
	// this will be displayed only on specific scenarios. Otherwise, the "legacy" label will be displayed.
	display: none;
}

#payment .payment_methods {
	li[class*='payment_method_woocommerce_payments'] > label > img {
		float: right;
		border: 0;
		padding: 0;
		height: 24px !important;
		max-height: 24px !important;
	}

	&.wc_payment_methods,
	&.woocommerce-PaymentMethods {
		li[class*='payment_method_woocommerce_payments'] {
			display: grid;
			grid-template-columns: 0fr 0fr 1fr;
			grid-template-rows: max-content;

			.woopayments-plain-payment-method-label {
				display: none;
			}

			> input[name='payment_method'] {
				&:checked ~ label {
					.payment-method-title {
						margin-right: 8px; // 8px gap between .payment-method-title and .test-mode.badge
					}

					.test-mode.badge {
						display: inline-block; // hiding the badge when the payment method is not selected
					}

					.stripe-pmme-container {
						display: none;
					}
				}
			}

			> label {
				grid-column: 3;
				margin-bottom: 0;
			}

			> div.payment_box {
				grid-area: 2 / 1 / 3 / 4;
			}

			> label:has( .woopayments-rich-payment-method-label ) {
				display: inline-flex;
				align-items: center;
				width: 100%;

				> img {
					display: none; // we'll display the image inside `.woopayments-rich-payment-method-label`, instead.
				}
			}

			.woopayments-rich-payment-method-label {
				display: grid;
				grid-template-columns: 1fr auto;
				align-items: center;
				margin-bottom: 0;
				flex-grow: 1;

				.label-title-container {
					display: block;
				}

				.payment-method-title {
					white-space: normal; // Allows wrapping if text is too long
					vertical-align: middle;
				}

				.test-mode.badge {
					display: none;
					background-color: #fff2d7;
					border-radius: 4px;
					padding: 4px 6px;
					font-size: 12px;
					font-weight: 400;
					line-height: 16px;
					color: #4d3716;
					vertical-align: middle;
					white-space: nowrap; // Prevents the badge text from wrapping
				}

				img {
					border: 0;
					padding: 0;
					height: 24px !important;
					max-height: 24px !important;
					justify-self: end;
					margin: 3px 0; // ensuring the images don't appear squished when all the payment methods are rendered next to each others, like in Elementor.
					align-self: center;
				}

				.stripe-pmme-container {
					&:empty {
						display: none; // hides container if empty, without affecting alignment
					}

					margin-left: 0.25em; // WooCommerce Core will add a &nbsp; on the left of the payment method's label - this spacing ensures that at least it's consistently aligned.
					pointer-events: none;
					grid-column: 1 / 2;
					grid-row: 2 / 3;
					align-self: start;
					width: 100%;
				}
			}
		}
	}
}
